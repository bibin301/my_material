(function(){angular.module("toaster",["ngAnimate"]).constant("toasterConfig",{limit:0,"tap-to-dismiss":true,"close-button":false,"newest-on-top":true,"time-out":5000,"icon-classes":{error:"toast-error",info:"toast-info",wait:"toast-wait",success:"toast-success",warning:"toast-warning"},"body-output-type":"","body-template":"toasterBodyTmpl.html","icon-class":"toast-info","position-class":"toast-top-right","title-class":"toast-title","message-class":"toast-message","mouseover-timer-stop":true}).service("toaster",["$rootScope","toasterConfig",function(a,b){this.pop=function(f,i,d,g,e,j){if(angular.isObject(f)){var h=f;this.toast={type:h.type,title:h.title,body:h.body,timeout:h.timeout,bodyOutputType:h.bodyOutputType,clickHandler:h.clickHandler}}else{this.toast={type:f,title:i,body:d,timeout:g,bodyOutputType:e,clickHandler:j}}a.$emit("toaster-newToast")};this.clear=function(){a.$emit("toaster-clearToasts")};for(var c in b["icon-classes"]){this[c]=(function(d){return function(h,e,g,f,i){if(angular.isString(h)){this.pop(d,h,e,g,f,i)}else{this.pop(angular.extend(h,{type:d}))}}})(c)}}]).factory("toasterRegisterEvents",function(){var a={_NewToastEvent:false,_ClearAllToastsEvent:false,registerNewToastEvent:function(){this._NewToastEvent=true},registerClearAllToastsEvent:function(){this._ClearAllToastsEvent=true},isRegisteredNewToastEvent:function(){return this._NewToastEvent},isRegisteredClearAllToastsEvent:function(){return this._ClearAllToastsEvent}};return{registerNewToastEvent:a.registerNewToastEvent,registerClearAllToastsEvent:a.registerClearAllToastsEvent,isRegisteredNewToastEvent:a.isRegisteredNewToastEvent,isRegisteredClearAllToastsEvent:a.isRegisteredClearAllToastsEvent}}).directive("toasterContainer",["$parse","$rootScope","$interval","$sce","toasterConfig","toaster","toasterRegisterEvents",function(f,a,g,c,b,d,e){return{replace:true,restrict:"EA",scope:true,link:function(j,o,i){var n=0,m;m=angular.extend({},b,j.$eval(i.toasterOptions));j.config={position:m["position-class"],title:m["title-class"],message:m["message-class"],tap:m["tap-to-dismiss"],closeButton:m["close-button"],animation:m["animation-class"],mouseoverTimer:m["mouseover-timer-stop"]};j.deregClearToasts=null;j.deregNewToast=null;j.$on("$destroy",function(){if(j.deregClearToasts){j.deregClearToasts()}if(j.deregNewToast){j.deregNewToast()}j.deregClearToasts=null;j.deregNewToast=null});j.configureTimer=function l(p){var q=typeof(p.timeout)=="number"?p.timeout:m["time-out"];if(q>0){k(p,q)}};function h(p){p.type=m["icon-classes"][p.type];if(!p.type){p.type=m["icon-class"]}n++;angular.extend(p,{id:n});p.bodyOutputType=p.bodyOutputType||m["body-output-type"];switch(p.bodyOutputType){case"trustedHtml":p.html=c.trustAsHtml(p.body);break;case"template":p.bodyTemplate=p.body||m["body-template"];break;case"templateWithData":var r=f(p.body||m["body-template"]);var q=r(j);p.bodyTemplate=q.template;p.data=q.data;break}j.configureTimer(p);if(m["newest-on-top"]===true){j.toasters.unshift(p);if(m.limit>0&&j.toasters.length>m.limit){j.toasters.pop()}}else{j.toasters.push(p);if(m.limit>0&&j.toasters.length>m.limit){j.toasters.shift()}}p.mouseover=false}function k(p,q){p.timeout=g(function(){if(!p.mouseover){j.removeToast(p.id)}},q)}j.toasters=[];if(!e.isRegisteredNewToastEvent()){e.registerNewToastEvent();j.deregNewToast=a.$on("toaster-newToast",function(){h(d.toast)})}if(!e.isRegisteredClearAllToastsEvent()){e.registerClearAllToastsEvent();j.deregClearToasts=a.$on("toaster-clearToasts",function(){j.toasters.splice(0,j.toasters.length)})}},controller:["$scope","$element","$attrs",function(j,i,h){j.stopTimer=function(k){k.mouseover=true;if(j.config.mouseoverTimer===true){if(k.timeout){g.cancel(k.timeout);k.timeout=null}}};j.restartTimer=function(k){k.mouseover=false;if(j.config.mouseoverTimer===true){if(!k.timeout){j.configureTimer(k)}}else{if(k.timeout===null){j.removeToast(d.id)}}};j.removeToast=function(l){var k=0;for(k;k<j.toasters.length;k++){if(j.toasters[k].id===l){break}}j.toasters.splice(k,1)};j.click=function(l,m){if(j.config.tap===true||m==true){var k=true;if(l.clickHandler){if(angular.isFunction(l.clickHandler)){k=l.clickHandler(l,m)}else{if(angular.isFunction(j.$parent.$eval(l.clickHandler))){k=j.$parent.$eval(l.clickHandler)(l,m)}else{console.log("TOAST-NOTE: Your click handler is not inside a parent scope of toaster-container.")}}}if(k){j.removeToast(l.id)}}}}],template:'<div  id="toast-container" ng-class="[config.position, config.animation]"><div ng-repeat="toaster in toasters" class="toast" ng-class="toaster.type" ng-click="click(toaster)" ng-mouseover="stopTimer(toaster)"  ng-mouseout="restartTimer(toaster)"><button class="toast-close-button" ng-show="config.closeButton" ng-click="click(toaster, true)">&times;</button><div ng-class="config.title">{{toaster.title}}</div><div ng-class="config.message" ng-switch on="toaster.bodyOutputType"><div ng-switch-when="trustedHtml" ng-bind-html="toaster.html"></div><div ng-switch-when="template"><div ng-include="toaster.bodyTemplate"></div></div><div ng-switch-when="templateWithData"><div ng-include="toaster.bodyTemplate"></div></div><div ng-switch-default >{{toaster.body}}</div></div></div></div>'}}])})(window,document);
